<!DOCTYPE html>
<html>

<head>
	<title>Local weather</title>
	<link rel="sytlesheet" type="text/css" href="main.css">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
	
	<style>
	
		body{
			background-image:url("https://static.pexels.com/photos/509687/pexels-photo-509687.jpeg");
			background-position:center center;
			background-attachment:fixed;
			background-repeat:no-repeat;
			background-size:cover;
		}
		#box{
			width:60%;
			margin-left:20%;
			margin-right:20%;
			background-color:rgba(225,225,225,.60);
			
		}
		#pad{
			padding-bottom:15%;
		}
		#add a{
			color:#f7935d;
			
		}
		#option{
			padding-bottom:5%;
			font-family:Lobster;
			color:#4f1f16;
		}
		#block{
			margin-top:5%;
		 
		}
		div.daily{
		
			padding-top:5%;
		
		}
		@media only screen and (max-width: 500px) {
			#box{
				width:90%;
				margin-left:5%;
				margin-right:5%;
				background-color:rgba(225,225,225,.60);
				
			
			}
			#icon{
				width:96px;
				height:96px;
			
			}
			body{
			
				min-height:100vh;
			
			}
			
		}

	
	</style>
	
	
</head>



<body>
	<center><h1 id="option">A Local Weather App<h1>
		<hr style="width:75%;margin-top:-4%;padding-bottom:4%;">
	</center>
		
	<div id="box" class="container jumbotron">
		
		<div class="row main">
			<div class="col-md-6 col-md-12" id="one">
				<h3><span class="loc"></span></h3>
				<i><h5><span class="date"></span></h5></i>
				<h5><span class="desc"></span></h5>
				
				<div class="row" align="center">
					<div class="col-md-6 col-xm-6">
						<img src="#" id="icon" width="128px" height="128px"></img></span>
					</div>
					<div class="col-md-6 col-xm-6" id="block">
						<h2><span class ="temp"></span>&deg;<a  href="#"class="change">C</a></span> | <a  href="#"class="change2">F</a></h2>
					</div>
				</div>
			</div>
			<div class="col-md-6 col-md-12" id="two" align="center">
				<h3 class="city"> </h3>
				<h3 class="wind"> </h3>
				<h3 class="preasure"></h3>
			</div>
			
		</div>
		
		<div align="center">
			<h4 class="daily"></h4>
		</div>
	</div>
	<div align="center" id="add" style="color:#f4e4dc;padding-top:3%;"><h5>Coded and designed by <a href="https://www.facebook.com/profile.php?id=100009758328154&ref=bookmarks">Dwip S.Mondal</a> powered by <a href="https://darksky.net/dev/">Dark sky API</a></h5></div>
</body>

<script>
	$(document).ready(function(){
	  var lat;
	  var log;
	  
	  if (navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(function(position) {
		  lat = position.coords.latitude;
		  log = position.coords.longitude; 
		  url= 'https://crossorigin.me/https://api.darksky.net/forecast/27cadd69d06d8c0c792391701e8550b0/'+lat+','+log+'?units=si';
		  url2='https://crossorigin.me/https://api.darksky.net/forecast/27cadd69d06d8c0c792391701e8550b0/'+lat+','+log;
		  
		  $.getJSON(url,function(data){
		  
			console.log(data);

			$(".temp").html(Math.round(data.currently.temperature));
			$(".city").html("Humidity: "+data.currently.humidity*100+"%");
			$(".wind").html("Wind: "+data.currently.windSpeed+" kmph");
			$(".preasure").html("Pressure: "+data.currently.pressure+" Pa");
			$(".loc").html("Location: "+data.timezone);
			$(".desc").html("Summary:"+"<b>"+data.currently.summary+"</b>");
			$(".daily").html(data.daily.summary);

			var list = [
            "clear-day", "clear-night", "partly-cloudy-day",
            "partly-cloudy-night", "cloudy", "rain", "sleet", "snow", "wind",
            "fog"
          ];
			for(var i=0; i<10; i++){
			
				if(data.currently.icon == list[i]){
					
					$("#icon").attr('src',data.currently.icon+".png");
					
				}
			
			}
			var current = $.now();
			var maxDate = new Date(current);
			var currentDate = maxDate.toString();
			$(".date").html(currentDate);
			
			
		  
		  });
			
			$(".change2").on("click",function(){
			
				$.getJSON(url2,function(data){
		  
				console.log(data);

				$(".temp").html(Math.round(data.currently.temperature));
				$(".city").html("Humidity: "+data.currently.humidity*100+"%");
				$(".wind").html("Wind: "+data.currently.windSpeed+" mph");
				$(".preasure").html("Pressure: "+data.currently.pressure+" Ba");
				$(".loc").html("Location: "+data.timezone);
				$(".desc").html("Summary:"+"<b>"+data.currently.summary+"</b>");
				

				var list = [
				"clear-day", "clear-night", "partly-cloudy-day",
				"partly-cloudy-night", "cloudy", "rain", "sleet", "snow", "wind",
				"fog"
				];
				for(var i=0; i<10; i++){
				
					if(data.currently.icon == list[i]){
						
						$("#icon").attr('src',data.currently.icon+".png");
						
					}
				
				}
				var current = $.now();
				var maxDate = new Date(current);
				var currentDate = maxDate.toString();
				$(".date").html(currentDate);
				
				
			  
			  });
			
			
			});	
			$(".change").on("click",function(){
			
			
				$.getJSON(url,function(data){
		  
				console.log(data);

				$(".temp").html(Math.round(data.currently.temperature));
				$(".city").html("Humidity: "+data.currently.humidity*100+"%");
				$(".wind").html("Wind: "+data.currently.windSpeed+" kmph");
				$(".preasure").html("Pressure: "+data.currently.pressure+" Pa");
				$(".loc").html("Location: "+data.timezone);
				$(".desc").html("Summary:"+"<b>"+data.currently.summary+"</b>");
				

				var list = [
				"clear-day", "clear-night", "partly-cloudy-day",
				"partly-cloudy-night", "cloudy", "rain", "sleet", "snow", "wind",
				"fog"
			  ];
				for(var i=0; i<10; i++){
				
					if(data.currently.icon == list[i]){
						
						$("#icon").attr('src',data.currently.icon+".png");
						
					}
				
				}
				var current = $.now();
				var maxDate = new Date(current);
				var currentDate = maxDate.toString();
				$(".date").html(currentDate);
				
				
			  
			  });
				
			
			});
			
					  
		  
		  
	  });
	  
	  }
	  
 
  
  
});

</script>



</html>
